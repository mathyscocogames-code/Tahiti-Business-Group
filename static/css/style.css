/* ================================================================
   TAHITI BUSINESS GROUPE — Design Épuré Blanc/Noir (Jour 3)
   Inspiré : ladagemaxime.com + Facebook Marketplace
   ================================================================ */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap');

:root {
  --bg:        #ffffff;
  --bg-alt:    #f8f9fa;
  --bg-alt2:   #f0f2f5;
  --surface:   #ffffff;
  --text:      #111827;
  --text-sub:  #374151;
  --text-hint: #6b7280;
  --border:    #d1d5db;
  --border-md: #9ca3af;
  --primary:   #111827;
  --primary-h: #000000;
  --accent:    #111827;
  --accent-h:  #000000;
  --danger:    #ef4444;
  --warning:   #f59e0b;
  --shadow-sm: 0 1px 3px rgba(0,0,0,.10);
  --shadow:    0 4px 16px rgba(0,0,0,.12);
  --shadow-lg: 0 12px 40px rgba(0,0,0,.20);
  --radius:    14px;
  --radius-sm: 8px;
  --radius-lg: 20px;
}

/* ── Reset & base ─────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; }

html {
  scroll-behavior: smooth;
  /* Prevent any element from causing horizontal scroll on mobile
     (clip = no scroll, no stacking-context side effects → sticky still works) */
  overflow-x: clip;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg-alt);
  color: var(--text);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  max-width: 100%;
}

/* ── Serif headings (Libre Baskerville = Canela libre) ────────── */
h1, h2 {
  font-family: 'Libre Baskerville', Georgia, serif;
}

/* ── Scrollbar ────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--bg-alt); }
::-webkit-scrollbar-thumb { background: var(--border-md); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #9ca3af; }

/* ── Form inputs ─────────────────────────────────────────────── */
.form-input {
  width: 100%;
  background: var(--bg);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 11px 14px;
  color: var(--text);
  font-size: 14px;
  font-family: inherit;
  outline: none;
  transition: border-color .2s, box-shadow .2s;
}
.form-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(26,108,241,.12);
}
.form-input::placeholder { color: var(--text-hint); }
select.form-input option  { background: white; color: var(--text); }
textarea.form-input       { resize: vertical; min-height: 100px; }

/* ── Search bar (header Zone 1) ──────────────────────────────── */
.search-bar {
  display: flex;
  border: 1.5px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--bg);
  box-shadow: var(--shadow-sm);
  transition: border-color .2s, box-shadow .2s;
}
.search-bar:focus-within {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(26,108,241,.10);
}
.search-bar__input {
  flex: 1;
  min-width: 0;        /* allow flex item to shrink below content width */
  padding: 10px 16px;
  font-size: 14px;
  color: var(--text);
  background: transparent;
  outline: none;
  font-family: inherit;
}
.search-bar__input::placeholder { color: var(--text-hint); }
.search-bar__btn {
  padding: 0 18px;
  background: var(--primary);
  color: white;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  transition: background .15s;
}
.search-bar__btn:hover { background: var(--primary-h); }

/* ── Logo header ─────────────────────────────────────────────── */
.logo-header {
  height: 42px;
  width: auto;
  display: block;
  transition: opacity .15s;
}
.logo-header:hover { opacity: .82; }
@media (max-width: 640px) { .logo-header { height: 34px; } }

/* ── Header shadow ───────────────────────────────────────────── */
.header-shadow {
  box-shadow: 0 1px 0 var(--border), 0 2px 8px rgba(0,0,0,.04);
}

/* ── Annonce card ─────────────────────────────────────────────── */
.ad-card {
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: transform .25s cubic-bezier(.4,0,.2,1),
              box-shadow .25s cubic-bezier(.4,0,.2,1),
              border-color .25s;
  cursor: pointer;
}
.ad-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary);
}
.ad-card__img {
  width: 100%;
  aspect-ratio: 4/3;
  object-fit: cover;
  background: var(--bg-alt2);
  display: block;
  transition: transform .35s;
}
.ad-card:hover .ad-card__img { transform: scale(1.04); }
.ad-card__body  { padding: 12px 14px 14px; flex: 1; }
.ad-card__title {
  font-weight: 600;
  font-size: 14px;
  color: var(--text);
  line-height: 1.35;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  margin-bottom: 6px;
}
.ad-card__price {
  font-size: 17px;
  font-weight: 800;
  color: var(--primary);
  letter-spacing: -.3px;
}
.ad-card__meta {
  font-size: 12px;
  color: var(--text-sub);
  margin-top: 6px;
  display: flex;
  gap: 10px;
  align-items: center;
}
.ad-card__badge {
  position: absolute;
  top: 8px;
  left: 8px;
  background: var(--accent);
  color: #fff;
  font-size: 10px;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 20px;
  letter-spacing: .4px;
  text-transform: uppercase;
}

/* ── Pub slots (sidebar) ─────────────────────────────────────── */
.pub-slot {
  background: var(--bg);
  border: 2px dashed var(--border-md);
  border-radius: var(--radius);
  transition: border-color .2s, box-shadow .2s;
}
.pub-slot.filled {
  border-style: solid;
  border-color: var(--border);
  box-shadow: var(--shadow-sm);
}
.pub-slot:hover { border-color: var(--primary); }

.pub-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 24px 16px;
  min-height: 160px;
}
.pub-empty__icon { font-size: 2rem; margin-bottom: 8px; }
.pub-empty__title { font-weight: 700; font-size: 14px; color: var(--text); }
.pub-empty__price { font-weight: 800; color: var(--primary); font-size: 18px; margin: 4px 0; }
.pub-empty__sub   { font-size: 11px; color: var(--text-hint); }
.pub-empty__cta   {
  margin-top: 12px;
  background: var(--primary);
  color: white;
  font-size: 12px;
  font-weight: 600;
  padding: 7px 16px;
  border-radius: 8px;
  text-decoration: none;
  display: inline-block;
  transition: background .2s;
}
.pub-empty__cta:hover { background: var(--primary-h); }

/* ── Billboard (header pub, full width) ──────────────────────── */
.billboard-wrap {
  display: block;
  width: 100%;
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow);
  text-decoration: none;
}
.billboard-img {
  width: 100%;
  height: 160px;
  object-fit: cover;
  display: block;
  transition: opacity .2s;
}
.billboard-wrap:hover .billboard-img { opacity: .93; }
@media (min-width: 640px)  { .billboard-img { height: 220px; } }
@media (min-width: 1024px) { .billboard-img { height: 300px; } }

.billboard-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 6px;
  width: 100%;
  height: 160px;
  background: linear-gradient(135deg, #f0f4ff 0%, #e8f0fe 100%);
  border: 2px dashed #bfdbfe;
  border-radius: var(--radius);
  text-decoration: none;
  transition: border-color .2s;
}
@media (min-width: 640px)  { .billboard-empty { height: 220px; } }
@media (min-width: 1024px) { .billboard-empty { height: 300px; } }
.billboard-empty:hover { border-color: var(--primary); }
.billboard-empty__size  { font-size: 11px; color: var(--text-hint); }
.billboard-empty__title { font-size: 16px; font-weight: 700; color: var(--text); font-family: inherit; }
.billboard-empty__price { font-size: 22px; font-weight: 900; color: var(--primary); }
.billboard-empty__cta   { font-size: 12px; font-weight: 600; color: var(--primary); text-decoration: underline; }

/* ── Rectangle publicitaire fixe pleine largeur ─────────────────── */
.pub-bg-fixed {
  position: fixed;
  top: 108px;   /* juste sous le header sticky (zone1 64px + zone2 44px) */
  left: 0;
  width: 100vw;
  height: 280px; /* hauteur rectangle billboard desktop */
  z-index: 1;
  overflow: hidden;
  pointer-events: none;
  box-shadow: 0 6px 32px rgba(0,0,0,.22);
}
.pub-bg-fixed-link {
  display: block;
  width: 100%;
  height: 100%;
  text-decoration: none;
  pointer-events: auto;
}
.pub-bg-fixed-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}
.pub-bg-fixed-empty {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  background: linear-gradient(135deg, #1e3a8a 0%, #1a6cf1 60%, #0ea5e9 100%);
  text-decoration: none;
  cursor: pointer;
  pointer-events: auto;
}

/* Espaceur = hauteur du rectangle pub (contenu démarre juste en dessous) */
.pub-spacer {
  height: 280px;
  position: relative;
  z-index: 2;
  pointer-events: none;
}

/* Responsive billboard */
@media (max-width: 767px) {
  .pub-bg-fixed { height: 200px; }
  .pub-spacer   { height: 200px; }
}
@media (max-width: 479px) {
  .pub-bg-fixed { height: 140px; }
  .pub-spacer   { height: 140px; }
}

/* Couche contenu par-dessus l'image fixe — transparent pour voir l'image */
main {
  position: relative;
  z-index: 2;
  background: transparent;
}

/* ── Category nav – Zone 2 ────────────────────────────────────── */
.cat-nav {
  display: flex;
  align-items: stretch;
  height: 44px;
  gap: 0;
  overflow: visible;
}

.cat-nav-link {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 0 14px;
  height: 100%;
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  text-decoration: none;
  white-space: nowrap;
  border-bottom: 2px solid transparent;
  transition: color .15s, border-color .15s;
  cursor: pointer;
}
.cat-nav-link:hover         { color: var(--primary); border-bottom-color: var(--primary); }
.cat-nav-link--all          { font-weight: 700; color: #111827; padding-right: 16px; }
.cat-nav-link--pub          { color: var(--primary); font-weight: 700; }
.cat-nav-link--pub:hover    { color: var(--primary-h); border-bottom-color: var(--primary-h); }

.cat-nav-chevron {
  width: 12px;
  height: 12px;
  color: #9ca3af;
  flex-shrink: 0;
  transition: transform .15s;
}
.cat-nav-item:hover .cat-nav-chevron { transform: rotate(180deg); }

/* ── Dropdown ─────────────────────────────────────────────────── */
.cat-nav-item {
  position: relative;
  height: 100%;
  display: flex;
  align-items: center;
}
/* for user menu in Zone 1 (no fixed height context) */
.user-menu { height: auto; }

.cat-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 210px;
  background: white;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  box-shadow: 0 20px 60px rgba(0,0,0,.15);
  z-index: 1000;
  padding: 6px 0;
  /* Fix hover gap : opacity+visibility > display:none */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform: translateY(-8px);
  transition: opacity .18s cubic-bezier(.4,0,.2,1),
              transform .18s cubic-bezier(.4,0,.2,1),
              visibility .18s;
}
.cat-dropdown--right { left: auto; right: 0; }

/* Hover ET focus-within (accessibilité clavier) */
.cat-nav-item:hover .cat-dropdown,
.cat-nav-item:focus-within .cat-dropdown {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateY(0);
}

.cat-dropdown a {
  display: block;
  padding: 9px 16px;
  font-size: 13px;
  color: #374151;
  text-decoration: none;
  white-space: nowrap;
  transition: background .12s, color .12s;
}
.cat-dropdown a:hover { background: #eff6ff; color: var(--primary); }

/* user menu inner link overrides */
.user-menu-admin { color: var(--primary) !important; font-weight: 600; }
.user-menu-django { color: #9ca3af !important; }
.user-menu-sep { border-top: 1px solid #f3f4f6; }
.user-menu-logout { color: var(--danger) !important; }
.user-menu-logout:hover { background: #fef2f2 !important; }

.cat-dropdown__header {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .06em;
  color: #9ca3af;
  padding: 8px 16px 4px;
}

/* ── Boutons ──────────────────────────────────────────────────── */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 20px;
  border-radius: var(--radius-sm);
  font-weight: 600;
  font-size: 14px;
  border: none;
  cursor: pointer;
  text-decoration: none;
  transition: all .2s;
  font-family: inherit;
}
.btn-primary { background: var(--primary); color: #fff; }
.btn-primary:hover { background: var(--primary-h); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(26,108,241,.3); }
.btn-accent  { background: var(--accent);  color: #fff; }
.btn-accent:hover  { background: var(--accent-h); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(5,150,105,.25); }
.btn-outline { background: transparent; color: var(--text); border: 1.5px solid var(--border); }
.btn-outline:hover { border-color: var(--text); background: var(--bg-alt2); }
.btn-danger  { background: var(--danger); color: #fff; }

/* ── Category pill (index quick-access, kept for other pages) ─── */
.cat-pill {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 16px 12px;
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  text-decoration: none;
  transition: all .2s;
  cursor: pointer;
}
.cat-pill:hover {
  border-color: var(--primary);
  background: #eff6ff;
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}
.cat-pill.active {
  border-color: var(--primary);
  background: #eff6ff;
  color: var(--primary);
}
.cat-pill__icon { font-size: 1.6rem; line-height: 1; }
.cat-pill__label { font-size: 11px; font-weight: 600; color: var(--text-sub); text-align: center; }

/* ── Sidebar layout ───────────────────────────────────────────── */
.layout-with-sidebar {
  display: flex;
  gap: 24px;
  align-items: flex-start;
}
.layout-main   { flex: 1; min-width: 0; }
/* top = zone1(64px) + zone2(44px) + 8px gap */
.layout-sidebar { width: 280px; flex-shrink: 0; position: sticky; top: 116px; }

@media (max-width: 1024px) {
  .layout-with-sidebar { flex-direction: column; }
  .layout-sidebar { width: 100%; position: static; }
}

/* ── Ads grid ─────────────────────────────────────────────────── */
.ads-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}
@media (max-width: 640px) {
  .ads-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
}

/* ── Stat card ────────────────────────────────────────────────── */
.stat-card {
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  text-align: center;
}
.stat-card__value { font-size: 2rem; font-weight: 900; color: var(--text); line-height: 1; }
.stat-card__label { font-size: 12px; color: var(--text-sub); margin-top: 4px; }

/* ── Badges statut ────────────────────────────────────────────── */
.badge { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; }
.badge-actif   { background: #dcfce7; color: #166534; }
.badge-modere  { background: #fef9c3; color: #854d0e; }
.badge-vendu   { background: #f3f4f6; color: #6b7280; }
.badge-expire  { background: #fee2e2; color: #991b1b; }
.badge-pro     { background: #dbeafe; color: #1e40af; }
.badge-admin   { background: #fce7f3; color: #9d174d; }

/* ── Toast ────────────────────────────────────────────────────── */
.toast {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 9999;
  padding: 14px 20px;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 500;
  max-width: 340px;
  box-shadow: var(--shadow-lg);
  animation: toastIn .3s cubic-bezier(.4,0,.2,1);
  display: flex;
  align-items: center;
  gap: 10px;
}
@keyframes toastIn {
  from { transform: translateX(120px); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}
.toast.success { background: #fff; border-left: 4px solid var(--accent);  color: var(--text); }
.toast.error   { background: #fff; border-left: 4px solid var(--danger);  color: var(--text); }
.toast.info    { background: #fff; border-left: 4px solid var(--primary); color: var(--text); }

/* ── Infinite scroll loader ───────────────────────────────────── */
.load-sentinel { height: 4px; }
.load-spinner  {
  display: none;
  justify-content: center;
  padding: 24px;
}
.load-spinner.active { display: flex; }
.spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--border);
  border-top-color: var(--primary);
  border-radius: 50%;
  animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ── Photo gallery ────────────────────────────────────────────── */
.photo-main { aspect-ratio: 16/10; object-fit: contain; background: var(--bg-alt); width: 100%; border-radius: var(--radius); }
.photo-thumb {
  width: 72px;
  height: 56px;
  object-fit: cover;
  border-radius: var(--radius-sm);
  cursor: pointer;
  border: 2px solid transparent;
  opacity: .65;
  transition: opacity .2s, border-color .2s;
  flex-shrink: 0;
}
.photo-thumb:hover, .photo-thumb.active { opacity: 1; border-color: var(--primary); }

/* ── Transitions globales ─────────────────────────────────────── */
a, button { transition: color .15s, background .15s, border-color .15s, box-shadow .15s; }

/* ── Lazy image ───────────────────────────────────────────────── */
img[data-src] { opacity: 0; transition: opacity .4s; }
img.loaded     { opacity: 1; }

/* ── Mobile CTA sticky ────────────────────────────────────────── */
@media (max-width: 768px) {
  .sticky-cta {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 12px 16px;
    background: white;
    border-top: 1px solid var(--border);
    z-index: 40;
    display: flex;
    gap: 8px;
  }
  body { padding-bottom: 72px; }
}
@media (min-width: 769px) { .sticky-cta { display: none; } }
/* -- Billboard milieu (placeholder Carrefour rouge) -- */
.billboard-milieu-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 160px;
  background: linear-gradient(135deg, #e61920 0%, #b0121b 100%);
  border-radius: var(--radius);
  text-decoration: none;
  overflow: hidden;
  position: relative;
  transition: opacity .2s;
}
@media (min-width: 640px)  { .billboard-milieu-empty { height: 200px; } }
@media (min-width: 1024px) { .billboard-milieu-empty { height: 240px; } }
.billboard-milieu-empty:hover { opacity: .93; }
.billboard-milieu-empty::before {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(45deg, transparent, transparent 40px, rgba(255,255,255,.04) 40px, rgba(255,255,255,.04) 80px);
}
.billboard-milieu-empty__inner {
  position: relative;
  text-align: center;
  padding: 16px;
}
.billboard-milieu-empty__badge {
  display: inline-block;
  background: rgba(255,255,255,.2);
  color: rgba(255,255,255,.9);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: .12em;
  text-transform: uppercase;
  padding: 3px 10px;
  border-radius: 20px;
  margin-bottom: 10px;
  border: 1px solid rgba(255,255,255,.3);
}
.billboard-milieu-empty__title {
  font-size: clamp(18px, 4vw, 32px);
  font-weight: 900;
  color: #fff;
  letter-spacing: -.5px;
  margin-bottom: 6px;
  font-family: "Inter", sans-serif;
}
.billboard-milieu-empty__price {
  font-size: clamp(14px, 2.5vw, 20px);
  font-weight: 700;
  color: rgba(255,255,255,.9);
  margin-bottom: 14px;
}
.billboard-milieu-empty__cta {
  display: inline-block;
  background: #fff;
  color: #e61920;
  font-size: 13px;
  font-weight: 800;
  padding: 8px 22px;
  border-radius: 50px;
  transition: transform .15s, box-shadow .15s;
}
.billboard-milieu-empty:hover .billboard-milieu-empty__cta {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
}

/* ── ad-card: div wrapper (was <a>) ──────────────────────────── */
.ad-card__link {
  display: block;
  text-decoration: none;
  color: inherit;
  flex: 1;
}
.ad-card__link:hover .ad-card__img { transform: scale(1.04); }

/* ── Contacter button on cards ───────────────────────────────── */
.btn-contact-card {
  display: block;
  width: 100%;
  padding: 7px 0;
  background: #eff6ff;
  color: var(--primary);
  font-size: 12px;
  font-weight: 700;
  border: 1.5px solid #bfdbfe;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
  transition: background .15s, border-color .15s, color .15s;
}
.btn-contact-card:hover {
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
}

/* ── Contact modal overlay ───────────────────────────────────── */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  z-index: 9000;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: 0;
}
@media (min-width: 640px) {
  .modal-overlay {
    align-items: center;
    padding: 16px;
  }
}
.modal-box {
  background: #fff;
  border-radius: 20px 20px 0 0;
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 -8px 40px rgba(0,0,0,.18);
  animation: slideUp .25s cubic-bezier(.4,0,.2,1);
}
@media (min-width: 640px) {
  .modal-box {
    border-radius: 20px;
    box-shadow: 0 24px 80px rgba(0,0,0,.2);
    animation: fadeScale .2s cubic-bezier(.4,0,.2,1);
  }
}
@keyframes slideUp {
  from { transform: translateY(100%); }
  to   { transform: translateY(0); }
}
@keyframes fadeScale {
  from { opacity: 0; transform: scale(.95); }
  to   { opacity: 1; transform: scale(1); }
}
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.modal-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px; height: 32px;
  border-radius: 50%;
  border: none;
  background: transparent;
  color: #6b7280;
  cursor: pointer;
  transition: background .15s, color .15s;
}
.modal-close-btn:hover { background: #f3f4f6; color: #111827; }
.modal-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

/* ── Chat thread ─────────────────────────────────────────────── */
.chat-thread {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 260px;
  overflow-y: auto;
  margin-bottom: 4px;
  padding-right: 4px;
}
.chat-thread:empty { display: none; }
.chat-bubble {
  display: flex;
  flex-direction: column;
  max-width: 82%;
}
.chat-bubble--me {
  align-self: flex-end;
  align-items: flex-end;
}
.chat-bubble--other {
  align-self: flex-start;
  align-items: flex-start;
}
.chat-bubble__text {
  padding: 9px 13px;
  border-radius: 16px;
  font-size: 13px;
  line-height: 1.45;
  word-break: break-word;
}
.chat-bubble--me    .chat-bubble__text { background: var(--primary); color: #fff; border-bottom-right-radius: 4px; }
.chat-bubble--other .chat-bubble__text { background: #f3f4f6; color: #111827; border-bottom-left-radius: 4px; }
.chat-bubble__time {
  font-size: 10px;
  color: #9ca3af;
  margin-top: 3px;
  padding: 0 4px;
}

/* ══════════════════════════════════════════════════════════════
   JOUR 9 — RESPONSIVE MOBILE (320px → desktop)
   ══════════════════════════════════════════════════════════════ */

/* ── Cat-nav: horizontal scroll on mobile ────────────────────── */
@media (max-width: 767px) {
  .cat-nav {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scrollbar-width: none;
    flex-wrap: nowrap;
  }
  .cat-nav::-webkit-scrollbar { display: none; }
  /* No hover on touch → hide dropdowns entirely */
  .cat-dropdown { display: none !important; }
  .cat-nav-chevron { display: none; }
  .cat-nav-link { padding: 0 10px; font-size: 12px; }
}

/* ── iOS input font-size: prevent auto-zoom on focus ─────────── */
@media (max-width: 767px) {
  .form-input { font-size: 16px; }
  .search-bar__input { font-size: 16px; }
}

/* ── Ad cards: tighter on small screens ─────────────────────── */
@media (max-width: 640px) {
  .ad-card__body { padding: 8px 10px 10px; }
  .ad-card__title { font-size: 12px; }
  .ad-card__price { font-size: 14px; }
  .ad-card__meta  { font-size: 10px; gap: 6px; margin-top: 4px; }
  .btn-contact-card { font-size: 11px; padding: 5px 0; }
}

/* ── Header search: compact on very small screens ────────────── */
@media (max-width: 480px) {
  .search-bar__btn { padding: 0 12px; }
}

/* ── Header Zone 1: compact & aligned on mobile ──────────────── */
/* logo (shrink-0) | form flex-1 | actions (shrink-0)
   → reduce gap + height so it feels native on phones            */
@media (max-width: 767px) {
  /* Allow search form to shrink to available space */
  header form[method="get"] { min-width: 0; }
  /* Compact header height (64px → 56px) and tighter gap (12px → 8px) */
  header .flex.items-center.h-16 { height: 56px; gap: 8px; }
  /* Logo: never wider than 88px on mobile, preserves search space */
  header .logo-header { max-width: 88px; }
  /* search button: trim padding on mobile */
  header .search-bar__btn { padding: 0 12px; }
}
@media (max-width: 400px) {
  header .flex.items-center.h-16 { gap: 6px; padding-left: 12px; padding-right: 12px; }
  header .logo-header { max-width: 76px; }
}

/* ── Bottom navigation bar ───────────────────────────────────── */
.bottom-nav { display: none; }

@media (max-width: 767px) {
  /* Hide old 2-button sticky bar if still in DOM */
  .sticky-cta { display: none !important; }

  .bottom-nav {
    display: flex;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: #fff;
    border-top: 1px solid var(--border);
    z-index: 50;
    box-shadow: 0 -2px 12px rgba(0,0,0,.07);
    align-items: center;
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  body { padding-bottom: calc(60px + env(safe-area-inset-bottom, 0px)); }
}

.bottom-nav__item {
  flex: 1;
  height: 60px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 3px;
  text-decoration: none;
  color: var(--text-sub);
  font-size: 10px;
  font-weight: 500;
  transition: color .12s;
  position: relative;
  -webkit-tap-highlight-color: transparent;
}
.bottom-nav__item:active { opacity: .65; }

.bottom-nav__item--deposer {
  flex: none;
  width: 50px;
  height: 50px;
  background: var(--accent);
  color: #fff !important;
  border-radius: 14px;
  margin: 0 6px;
  gap: 0;
}
.bottom-nav__item--deposer:active { opacity: .85; }

.bottom-nav__badge {
  position: absolute;
  top: 8px;
  right: calc(50% - 18px);
  background: var(--danger);
  color: #fff;
  font-size: 9px;
  font-weight: 700;
  min-width: 16px;
  height: 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 3px;
  line-height: 1;
  pointer-events: none;
}

/* ── Hamburger button (mobile only) ─────────────────────────── */
.hamburger-btn {
  display: none;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: 1.5px solid var(--border);
  background: transparent;
  color: var(--text);
  cursor: pointer;
  flex-shrink: 0;
  transition: background .15s, border-color .15s;
  -webkit-tap-highlight-color: transparent;
}
.hamburger-btn:hover,
.hamburger-btn:active { background: var(--bg-alt2); border-color: var(--border-md); }

@media (max-width: 767px) {
  .hamburger-btn { display: flex; }
  /* Zone 2 hidden on mobile — slide panel takes over */
  #cat-zone-2 { display: none; }
  /* Messages icon in header hidden on mobile — bottom nav has it */
  .msg-icon-header { display: none; }
  /* Cap logo on very small screens for more search space */
  .logo-header { max-width: 96px; }
}

/* ── Slide menu overlay ──────────────────────────────────────── */
.slide-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.5);
  z-index: 499;
  opacity: 0;
  visibility: hidden;
  transition: opacity .3s, visibility .3s;
}
.slide-overlay--visible {
  opacity: 1;
  visibility: visible;
}

/* ── Slide menu panel ────────────────────────────────────────── */
.slide-menu {
  position: fixed;
  top: 0;
  right: -100%;
  width: min(300px, 85vw);
  height: 100dvh;
  background: #fff;
  z-index: 500;
  display: flex;
  flex-direction: column;
  box-shadow: -6px 0 40px rgba(0,0,0,.18);
  transition: right .32s cubic-bezier(.4,0,.2,1);
  overscroll-behavior: contain;
}
.slide-menu--open { right: 0; }

.slide-menu__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 20px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.slide-menu__close {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: var(--bg-alt2);
  color: var(--text-sub);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background .15s, color .15s;
}
.slide-menu__close:hover { background: var(--border-md); color: var(--text); }

.slide-menu__body {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
  overscroll-behavior: contain;
}
.slide-menu__sep {
  height: 1px;
  background: var(--border);
  margin: 8px 0;
}

.slide-cat-link {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 20px;
  font-size: 15px;
  font-weight: 500;
  color: var(--text);
  text-decoration: none;
  transition: background .12s, color .12s;
  -webkit-tap-highlight-color: transparent;
}
.slide-cat-link:hover,
.slide-cat-link:active { background: #eff6ff; color: var(--primary); }
.slide-cat-link--all  { color: var(--text-sub); font-size: 14px; font-weight: 400; }
.slide-cat-link--cta   { color: var(--accent); font-weight: 700; }
.slide-cat-link--admin { color: #6b7280; font-size: 13px; }
.slide-cat-icon       { font-size: 20px; width: 28px; text-align: center; flex-shrink: 0; }

.slide-menu__section-title {
  padding: 10px 20px 4px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
  color: var(--text-hint);
}


/* ════════════════════════════════════════════════════════════════════
   JOUR 12 — DESIGN MONOCHROME + TYPOGRAPHIE LIBRE BASKERVILLE
   ════════════════════════════════════════════════════════════════════ */

/* ── Typographie premium ─────────────────────────────────────────── */
h1, h2, h3, h4, h5, h6 {
  font-family: 'Libre Baskerville', Georgia, 'Times New Roman', serif;
  letter-spacing: -.02em;
}
body, p, input, textarea, select, button, a, label, span, li {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* ── Override Tailwind : fonds colorés → gris très clair ─────────── */
.bg-blue-50, .bg-blue-100,
.bg-emerald-50, .bg-emerald-100,
.bg-amber-50,  .bg-amber-100,
.bg-green-50,  .bg-green-100  { background-color: #f9fafb !important; }

/* ── Override Tailwind : boutons colorés → noir ─────────────────── */
.bg-blue-600,   .bg-blue-700,
.bg-emerald-600,.bg-emerald-700,
.bg-amber-500,  .bg-amber-600,
.bg-green-600,  .bg-green-700   { background-color: #111827 !important; }

.hover\:bg-blue-700:hover, .hover\:bg-blue-800:hover,
.hover\:bg-blue-50:hover,
.hover\:bg-emerald-700:hover,  .hover\:bg-emerald-500:hover,
.hover\:bg-amber-600:hover,    .hover\:bg-amber-400:hover { background-color: #000 !important; }

/* ── Override Tailwind : textes colorés → noir ───────────────────── */
.text-blue-600,   .text-blue-700,   .text-blue-800,
.text-emerald-600,.text-emerald-700,
.text-amber-600,  .text-amber-700,
.text-green-600,  .text-green-700   { color: #111827 !important; }

.hover\:text-blue-800:hover    { color: #000 !important; }

/* ── Override Tailwind : bordures colorées → gris ───────────────── */
.border-blue-200,    .border-blue-300,    .border-blue-400,
.border-emerald-100, .border-emerald-200, .border-emerald-300, .border-emerald-400,
.border-amber-200,   .border-amber-300,   .border-amber-400,
.border-blue-500 { border-color: #d1d5db !important; }

.hover\:border-blue-300:hover, .hover\:border-blue-400:hover,
.hover\:border-emerald-400:hover,
.hover\:border-amber-400:hover { border-color: #111827 !important; }

/* ── Override Tailwind : gradients colorés → noir ───────────────── */
.bg-gradient-to-r {
  background: linear-gradient(to right, #1a1a1a, #000000) !important;
}

/* ── Badges colorés dans rubriques → monochrome ─────────────────── */
.bg-amber-100.text-amber-700,
.bg-blue-50.text-blue-700,
.bg-emerald-50.text-emerald-700,
.bg-emerald-100.text-emerald-700 {
  background-color: #f3f4f6 !important;
  color: #111827 !important;
}

/* ── Exceptions : pubs conservent leurs couleurs ────────────────── */
/* Les pubs utilisent des classes custom (.billboard-*, .pub-slot)  */
/* pas de classes Tailwind colorées → aucun conflit                 */

/* ═══════════════════════════════════════════════════════════════════
   ARTICLE CARDS — Rubriques (Promo / Info / Nouveauté)
   ═══════════════════════════════════════════════════════════════════ */
.article-card {
  display: block;
  background: #ffffff;
  border: 2px solid #111827;
  border-radius: 0;
  overflow: hidden;
  cursor: pointer;
  text-decoration: none;
  color: inherit;
  transition: transform .25s ease, box-shadow .25s ease, border-color .2s;
}
.article-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 14px 44px rgba(0,0,0,.18);
  border-color: #000;
  text-decoration: none;
  color: inherit;
}

.article-card__image {
  width: 100%;
  height: 150px;
  background: #f3f4f6;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1px solid #e5e7eb;
}
.article-card__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: grayscale(100%);
  transition: filter .35s ease;
}
.article-card:hover .article-card__image img {
  filter: grayscale(0%);
}
.article-card__emoji {
  font-size: 52px;
  line-height: 1;
  filter: grayscale(30%);
  transition: filter .3s ease;
}
.article-card:hover .article-card__emoji {
  filter: grayscale(0%);
}

.article-card__body  { padding: 16px 18px 14px; }
.article-card__badge {
  display: inline-block;
  font-size: 9px;
  font-weight: 700;
  letter-spacing: .08em;
  text-transform: uppercase;
  border: 1px solid #111827;
  color: #111827;
  padding: 2px 7px;
  margin-bottom: 9px;
}
.article-card__title {
  font-family: 'Libre Baskerville', Georgia, serif;
  font-size: 14px;
  font-weight: 700;
  color: #000;
  line-height: 1.35;
  margin-bottom: 7px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.article-card__desc {
  font-size: 12px;
  color: #4b5563;
  line-height: 1.5;
  margin-bottom: 12px;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.article-card__meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 11px;
  color: #9ca3af;
  border-top: 1px solid #e5e7eb;
  padding-top: 10px;
}
.article-card__cta {
  font-size: 11px;
  font-weight: 700;
  color: #111827;
  text-decoration: underline;
  text-underline-offset: 2px;
  white-space: nowrap;
}
.article-card:hover .article-card__cta { color: #000; }

/* ── Rubrique grid ───────────────────────────────────────────────── */
.rubrique-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 20px;
}
@media (max-width: 640px) {
  .rubrique-grid { grid-template-columns: 1fr; }
}

/* ── Section header rubriques ────────────────────────────────────── */
.rubrique-section-header {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid #111827;
}
.rubrique-section-header h2 {
  font-family: 'Libre Baskerville', Georgia, serif;
  font-size: 20px;
  font-weight: 700;
  color: #000;
  margin: 0;
}
.rubrique-section-badge {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: .08em;
  text-transform: uppercase;
  border: 1px solid #111827;
  padding: 2px 7px;
  color: #111827;
}
.rubrique-section-link {
  margin-left: auto;
  font-size: 12px;
  font-weight: 700;
  color: #111827;
  text-decoration: underline;
  text-underline-offset: 3px;
}


/* ═══════════════════════════════════════════════════════════════
   JOUR 13 — SPINNERS · FAVORIS · UX POLISH
   ═══════════════════════════════════════════════════════════════ */

/* ── Loading spinner ─────────────────────────────────────────── */
@keyframes tbg-spin { to { transform: rotate(360deg); } }

.btn-spinner {
  display: inline-block;
  width: 14px;
  height: 14px;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: tbg-spin .6s linear infinite;
  vertical-align: -3px;
  margin-right: 6px;
}

/* ── Favoris button ─────────────────────────────────────────── */
.fav-btn { transition: background .2s, color .2s, border-color .2s; }
.fav-btn.fav-active,
[data-fav-pk].fav-active {
  color: #e11d48;
}

/* ── Scroll-to-top ajustement monochrome ──────────────────────── */
/* Already in main.js - just ensure it's above bottom-nav on mobile */
@media (max-width: 767px) {
  /* Scroll-to-top is injected at bottom-6 left-6 — fine above bottom nav */
}

/* ── Toast style harmonisé ───────────────────────────────────── */
.toast {
  position: fixed;
  bottom: 80px; /* above bottom nav */
  right: 16px;
  background: #111827;
  color: #fff;
  padding: 12px 18px;
  border-radius: 0;
  font-size: 13px;
  font-weight: 600;
  z-index: 9999;
  box-shadow: 0 8px 32px rgba(0,0,0,.25);
  max-width: 280px;
  transition: opacity .3s, transform .3s;
}
.toast.success { border-left: 3px solid #10b981; }
.toast.error   { border-left: 3px solid #ef4444; }
.toast.info    { border-left: 3px solid #6b7280; }

/* ── Messages Django harmonisés B&W ─────────────────────────── */
.bg-green-50.border-green-200 {
  background: #f9fafb !important;
  border-color: #111827 !important;
  color: #111827 !important;
}
.bg-red-50.border-red-200 {
  background: #fff5f5 !important;
  border-color: #ef4444 !important;
  color: #7f1d1d !important;
}

/* ── Admin stats bar chart ──────────────────────────────────── */
.stat-bar {
  display: flex;
  align-items: flex-end;
  height: 120px;
  gap: 3px;
  padding-bottom: 4px;
}
.stat-bar__col {
  flex: 1;
  background: #111827;
  border-radius: 2px 2px 0 0;
  min-height: 2px;
  transition: opacity .2s;
}
.stat-bar__col:hover { opacity: .7; }
